{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/app/dashboard/property-selector.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\n\ninterface Property {\n  id: string;\n  displayName: string;\n}\n\ninterface PropertySelectorProps {\n  properties: Property[];\n  currentPropertyId?: string;\n}\n\nexport function PropertySelector({\n  properties,\n  currentPropertyId,\n}: PropertySelectorProps) {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n\n  const handlePropertyChange = (propertyId: string) => {\n    const params = new URLSearchParams(searchParams.toString());\n    params.set(\"propertyId\", propertyId);\n    router.push(`/dashboard?${params.toString()}`);\n  };\n\n  if (properties.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"relative flex items-center gap-3\">\n      <label htmlFor=\"property-select\" className=\"text-sm font-medium text-slate-400\">\n        Property:\n      </label>\n      <div className=\"relative\">\n        <select\n          id=\"property-select\"\n          value={currentPropertyId || properties[0]?.id || \"\"}\n          onChange={(e) => handlePropertyChange(e.target.value)}\n          className=\"appearance-none rounded-lg border border-slate-700/50 bg-slate-800/50 px-4 py-2 pr-8 text-sm font-medium text-slate-200 transition-all hover:bg-slate-700/50 hover:border-slate-600/50 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 cursor-pointer shadow-sm\"\n        >\n          {properties.map((property) => (\n            <option key={property.id} value={property.id} className=\"bg-slate-800\">\n              {property.displayName}\n            </option>\n          ))}\n        </select>\n        {/* Custom dropdown arrow */}\n        <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-400\">\n          <svg\n            className=\"h-4 w-4\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M19 9l-7 7-7-7\"\n            />\n          </svg>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAeO,SAAS,iBAAiB,EAC/B,UAAU,EACV,iBAAiB,EACK;;IACtB,MAAM,SAAS,IAAA,uLAAS;IACxB,MAAM,eAAe,IAAA,6LAAe;IAEpC,MAAM,uBAAuB,CAAC;QAC5B,MAAM,SAAS,IAAI,gBAAgB,aAAa,QAAQ;QACxD,OAAO,GAAG,CAAC,cAAc;QACzB,OAAO,IAAI,CAAC,CAAC,WAAW,EAAE,OAAO,QAAQ,IAAI;IAC/C;IAEA,IAAI,WAAW,MAAM,KAAK,GAAG;QAC3B,OAAO;IACT;IAEA,qBACE,kOAAC;QAAI,WAAU;;0BACb,kOAAC;gBAAM,SAAQ;gBAAkB,WAAU;0BAAqC;;;;;;0BAGhF,kOAAC;gBAAI,WAAU;;kCACb,kOAAC;wBACC,IAAG;wBACH,OAAO,qBAAqB,UAAU,CAAC,EAAE,EAAE,MAAM;wBACjD,UAAU,CAAC,IAAM,qBAAqB,EAAE,MAAM,CAAC,KAAK;wBACpD,WAAU;kCAET,WAAW,GAAG,CAAC,CAAC,yBACf,kOAAC;gCAAyB,OAAO,SAAS,EAAE;gCAAE,WAAU;0CACrD,SAAS,WAAW;+BADV,SAAS,EAAE;;;;;;;;;;kCAM5B,kOAAC;wBAAI,WAAU;kCACb,cAAA,kOAAC;4BACC,WAAU;4BACV,MAAK;4BACL,QAAO;4BACP,SAAQ;4BACR,OAAM;sCAEN,cAAA,kOAAC;gCACC,eAAc;gCACd,gBAAe;gCACf,aAAa;gCACb,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOhB;GAvDgB;;QAIC,uLAAS;QACH,6LAAe;;;KALtB"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/app/actions/generateVoiceBriefing.ts"],"sourcesContent":["\"use server\";\n\nimport OpenAI from \"openai\";\n\nconst openai = new OpenAI({\n  apiKey: process.env.OPENAI_API_KEY,\n});\n\nexport async function generateVoiceBriefing(\n  text: string,\n  voice: \"onyx\" | \"shimmer\" = \"onyx\"\n) {\n  try {\n    if (!process.env.OPENAI_API_KEY) {\n      return {\n        error: \"OpenAI API key is not configured\",\n        audioBase64: null,\n      };\n    }\n\n    if (!text || text.trim().length === 0) {\n      return {\n        error: \"Text is required\",\n        audioBase64: null,\n      };\n    }\n\n    // Generate speech using OpenAI TTS\n    const response = await openai.audio.speech.create({\n      model: \"tts-1\",\n      voice: voice,\n      input: text,\n    });\n\n    // Convert the audio buffer to Base64\n    const buffer = Buffer.from(await response.arrayBuffer());\n    const audioBase64 = buffer.toString(\"base64\");\n\n    return {\n      audioBase64,\n      error: null,\n    };\n  } catch (error) {\n    console.error(\"Error generating voice briefing:\", error);\n    return {\n      error:\n        error instanceof Error\n          ? error.message\n          : \"Failed to generate voice briefing\",\n      audioBase64: null,\n    };\n  }\n}\n\n"],"names":[],"mappings":";;;;;;;MAQsB,wBAAA,WAAA,GAAA,IAAA,uRAAA,EAAA,8CAAA,4QAAA,EAAA,KAAA,GAAA,kRAAA,EAAA,yDAAA"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/app/actions/generateBusinessInsights.ts"],"sourcesContent":["\"use server\";\n\nimport OpenAI from \"openai\";\n\nconst openai = new OpenAI({\n  apiKey: process.env.OPENAI_API_KEY,\n});\n\ninterface BusinessInsight {\n  plainExplanation: string;\n  quantifiedRevenueLoss: string;\n  nonTechnicalSteps: string[];\n}\n\nexport async function generateBusinessInsights(\n  technicalFinding: string,\n  leakingRevenue?: number\n): Promise<{ insights?: BusinessInsight; error?: string }> {\n  try {\n    if (!process.env.OPENAI_API_KEY) {\n      return {\n        error: \"OpenAI API key is not configured\",\n      };\n    }\n\n    const prompt = `You are an AI consultant helping a 50-year-old business owner understand a technical analytics finding. \n\nTECHNICAL FINDING: \"${technicalFinding}\"\n${leakingRevenue ? `ESTIMATED MONTHLY REVENUE LOSS: $${leakingRevenue.toLocaleString()}` : ''}\n\nPlease provide:\n1. A plain explanation (2-3 sentences) explaining this finding in simple terms that a non-technical business owner would understand. Avoid jargon and technical terms.\n2. Quantify the potential revenue loss if this issue is not fixed. Use the estimated monthly revenue loss provided, or estimate based on the finding if not provided. Explain it in terms of annual impact and what it means for the business.\n3. Suggest exactly 3 non-technical steps the business owner can take to start fixing this issue. Each step should be actionable and not require coding knowledge.\n\nRespond in JSON format:\n{\n  \"plainExplanation\": \"...\",\n  \"quantifiedRevenueLoss\": \"...\",\n  \"nonTechnicalSteps\": [\"step 1\", \"step 2\", \"step 3\"]\n}`;\n\n    const completion = await openai.chat.completions.create({\n      model: \"gpt-4o-mini\",\n      messages: [\n        {\n          role: \"system\",\n          content:\n            \"You are a business consultant who translates technical findings into clear, actionable business insights for non-technical business owners.\",\n        },\n        {\n          role: \"user\",\n          content: prompt,\n        },\n      ],\n      response_format: { type: \"json_object\" },\n      temperature: 0.7,\n    });\n\n    const content = completion.choices[0]?.message?.content;\n    if (!content) {\n      return {\n        error: \"No response from OpenAI\",\n      };\n    }\n\n    try {\n      const insights = JSON.parse(content) as BusinessInsight;\n      return { insights };\n    } catch (parseError) {\n      console.error(\"Error parsing OpenAI response:\", parseError);\n      return {\n        error: \"Failed to parse AI response\",\n      };\n    }\n  } catch (error) {\n    console.error(\"Error generating business insights:\", error);\n    return {\n      error: error instanceof Error ? error.message : \"Failed to generate business insights\",\n    };\n  }\n}\n\n"],"names":[],"mappings":";;;;;;;MAcsB,wBAAA,WAAA,GAAA,IAAA,uRAAA,EAAA,8CAAA,4QAAA,EAAA,KAAA,GAAA,kRAAA,EAAA,4DAAA"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/app/actions/paystack.ts"],"sourcesContent":["\"use server\";\n\nexport async function initializePayment(email: string, amount: number): Promise<string> {\n  try {\n    const res = await fetch(\"https://api.paystack.co/transaction/initialize\", {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${process.env.PAYSTACK_SECRET_KEY}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email,\n        amount: amount * 100, // Paystack uses subunits (e.g., 50 GHS = 5000)\n        currency: \"GHS\",\n        callback_url: `${process.env.NEXT_PUBLIC_APP_URL}/dashboard?status=success`,\n      }),\n    });\n\n    if (!res.ok) {\n      throw new Error(`Paystack API error: ${res.status} ${res.statusText}`);\n    }\n\n    const data = await res.json();\n    \n    if (!data.data || !data.data.authorization_url) {\n      throw new Error(\"Invalid response from Paystack API\");\n    }\n\n    return data.data.authorization_url; // This is where we redirect the user\n  } catch (error) {\n    console.error(\"Error initializing payment:\", error);\n    throw error;\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAEsB,wBAAA,WAAA,GAAA,IAAA,uRAAA,EAAA,8CAAA,4QAAA,EAAA,KAAA,GAAA,kRAAA,EAAA,qDAAA"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/app/dashboard/no-properties-view.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion } from \"framer-motion\";\nimport { AlertCircle, Database, ExternalLink } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\n\ninterface NoPropertiesViewProps {\n  onUseDemoData: () => void;\n}\n\nexport function NoPropertiesView({ onUseDemoData }: NoPropertiesViewProps) {\n  const router = useRouter();\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"rounded-2xl border border-slate-700/50 bg-slate-900/40 backdrop-blur-xl p-8 lg:p-12 shadow-xl\"\n    >\n      <div className=\"flex flex-col items-center text-center max-w-2xl mx-auto\">\n        {/* Icon */}\n        <motion.div\n          initial={{ scale: 0.9 }}\n          animate={{ scale: 1 }}\n          transition={{ delay: 0.1 }}\n          className=\"mb-6 p-4 rounded-full bg-amber-500/10 border border-amber-500/20\"\n        >\n          <AlertCircle className=\"h-12 w-12 text-amber-400\" />\n        </motion.div>\n\n        {/* Heading */}\n        <h2 className=\"text-2xl sm:text-3xl font-bold text-slate-100 mb-4\">\n          No Active Properties Found\n        </h2>\n\n        {/* Description */}\n        <p className=\"text-slate-400 mb-8 leading-relaxed\">\n          We couldn't find any Google Analytics 4 properties connected to your account.\n          You can explore the dashboard with demo data, or set up a GA4 property to see\n          your actual analytics insights.\n        </p>\n\n        {/* Action Buttons */}\n        <div className=\"flex flex-col sm:flex-row gap-4 w-full sm:w-auto\">\n          <motion.button\n            onClick={onUseDemoData}\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            className=\"flex items-center justify-center gap-2 rounded-lg border border-emerald-500/30 bg-emerald-500/10 px-6 py-3 text-sm font-medium text-emerald-300 transition-colors hover:bg-emerald-500/20 hover:border-emerald-500/50\"\n          >\n            <Database className=\"h-4 w-4\" />\n            <span>Use Demo Data for Audit</span>\n          </motion.button>\n\n          <motion.a\n            href=\"https://support.google.com/analytics/answer/9304153\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            className=\"flex items-center justify-center gap-2 rounded-lg border border-slate-700/50 bg-slate-800/50 px-6 py-3 text-sm font-medium text-slate-300 transition-colors hover:bg-slate-700/50 hover:text-slate-100\"\n          >\n            <span>Set Up GA4 Property</span>\n            <ExternalLink className=\"h-4 w-4\" />\n          </motion.a>\n        </div>\n\n        {/* Demo Account Link */}\n        <div className=\"mt-8 pt-8 border-t border-slate-700/50\">\n          <p className=\"text-sm text-slate-500 mb-3\">\n            Want to test with sample data?\n          </p>\n          <motion.a\n            href=\"https://support.google.com/analytics/answer/6367342\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            className=\"inline-flex items-center gap-2 text-sm text-emerald-400 hover:text-emerald-300 transition-colors underline underline-offset-2\"\n          >\n            <span>Access Google Analytics Demo Account</span>\n            <ExternalLink className=\"h-4 w-4\" />\n          </motion.a>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;;;AAJA;;;;AAUO,SAAS,iBAAiB,EAAE,aAAa,EAAyB;;IACvE,MAAM,SAAS,IAAA,uLAAS;IAExB,qBACE,kOAAC,4OAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,WAAU;kBAEV,cAAA,kOAAC;YAAI,WAAU;;8BAEb,kOAAC,4OAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,OAAO;oBAAI;oBACtB,SAAS;wBAAE,OAAO;oBAAE;oBACpB,YAAY;wBAAE,OAAO;oBAAI;oBACzB,WAAU;8BAEV,cAAA,kOAAC,2QAAW;wBAAC,WAAU;;;;;;;;;;;8BAIzB,kOAAC;oBAAG,WAAU;8BAAqD;;;;;;8BAKnE,kOAAC;oBAAE,WAAU;8BAAsC;;;;;;8BAOnD,kOAAC;oBAAI,WAAU;;sCACb,kOAAC,4OAAM,CAAC,MAAM;4BACZ,SAAS;4BACT,YAAY;gCAAE,OAAO;4BAAK;4BAC1B,UAAU;gCAAE,OAAO;4BAAK;4BACxB,WAAU;;8CAEV,kOAAC,8PAAQ;oCAAC,WAAU;;;;;;8CACpB,kOAAC;8CAAK;;;;;;;;;;;;sCAGR,kOAAC,4OAAM,CAAC,CAAC;4BACP,MAAK;4BACL,QAAO;4BACP,KAAI;4BACJ,YAAY;gCAAE,OAAO;4BAAK;4BAC1B,UAAU;gCAAE,OAAO;4BAAK;4BACxB,WAAU;;8CAEV,kOAAC;8CAAK;;;;;;8CACN,kOAAC,8QAAY;oCAAC,WAAU;;;;;;;;;;;;;;;;;;8BAK5B,kOAAC;oBAAI,WAAU;;sCACb,kOAAC;4BAAE,WAAU;sCAA8B;;;;;;sCAG3C,kOAAC,4OAAM,CAAC,CAAC;4BACP,MAAK;4BACL,QAAO;4BACP,KAAI;4BACJ,YAAY;gCAAE,OAAO;4BAAK;4BAC1B,UAAU;gCAAE,OAAO;4BAAK;4BACxB,WAAU;;8CAEV,kOAAC;8CAAK;;;;;;8CACN,kOAAC,8QAAY;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMpC;GA7EgB;;QACC,uLAAS;;;KADV"}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/utils/generateAuditPDF.ts"],"sourcesContent":["interface UserData {\n  name: string;\n}\n\ninterface BusinessInsight {\n  plainExplanation: string;\n  quantifiedRevenueLoss: string;\n  nonTechnicalSteps: string[];\n}\n\ninterface AuditData {\n  leakingRevenue?: number;\n  activeUsers?: number;\n  conversions?: number;\n  sessions?: number;\n  topCulprit?: string;\n  recoveryPotential?: string;\n  insightText?: string;\n  businessInsights?: BusinessInsight;\n}\n\nexport async function generateAuditPDF(\n  userData: UserData,\n  auditData: AuditData,\n  isPaid: boolean\n): Promise<void> {\n  // Ensure we're in the browser\n  if (typeof window === 'undefined') {\n    console.error(\"generateAuditPDF can only be called on the client side\");\n    return;\n  }\n\n  console.log(\"PDF Triggered\");\n\n  try {\n    // Dynamic import to prevent server-side execution\n    // jspdf-autotable v5+ exports autoTable as a function, not as a prototype extension\n    const jsPDFModule: any = await import(\"jspdf\");\n    const { jsPDF } = jsPDFModule;\n    const autoTable = (await import(\"jspdf-autotable\")).default;\n    \n    // Initialize PDF document\n    const doc = new jsPDF();\n    \n    // Set up colors\n    const primaryColor: [number, number, number] = [52, 152, 219]; // Blue\n    const accentColor: [number, number, number] = [231, 76, 60]; // Red for revenue leak\n    const textColor: [number, number, number] = [44, 62, 80]; // Dark gray\n    \n    let yPosition = 20;\n    \n    // HEADER\n    doc.setFontSize(24);\n    doc.setTextColor(...primaryColor);\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.text(\"The Insight Engine\", 20, yPosition);\n    \n    yPosition += 10;\n    doc.setFontSize(14);\n    doc.setTextColor(...textColor);\n    doc.setFont(\"helvetica\", \"normal\");\n    doc.text(\"AI Audit Report\", 20, yPosition);\n    \n    yPosition += 5;\n    doc.setFontSize(10);\n    doc.setTextColor(128, 128, 128);\n    doc.text(\"Powered by Vera Labs\", 20, yPosition);\n    \n    // SUBHEADER\n    yPosition += 15;\n    doc.setFontSize(11);\n    doc.setTextColor(128, 128, 128);\n    const currentDate = new Date().toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    });\n    doc.text(`Prepared for: ${userData.name} | Date: ${currentDate}`, 20, yPosition);\n    \n    yPosition += 20;\n    \n    // SECTION 1: Executive Summary\n    doc.setFontSize(16);\n    doc.setTextColor(...textColor);\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.text(\"Executive Summary\", 20, yPosition);\n    \n    yPosition += 10;\n    doc.setFontSize(11);\n    doc.setTextColor(...textColor);\n    doc.setFont(\"helvetica\", \"normal\");\n    \n    // Format the insight text (remove \"AI Insight:\" prefix if present)\n    const summaryText = auditData.insightText \n      ? auditData.insightText.replace(/^AI Insight:\\s*/i, \"\")\n      : \"Our analysis has identified significant revenue leakage opportunities in your analytics data.\";\n    \n    // Split text into multiple lines if needed\n    const maxWidth = 170;\n  const summaryLines = doc.splitTextToSize(summaryText, maxWidth);\n  doc.text(summaryLines, 20, yPosition);\n  yPosition += summaryLines.length * 6 + 10;\n\n  // If not paid, add a lock notice in Executive Summary\n  if (!isPaid) {\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.setFontSize(11);\n    doc.setTextColor(200, 120, 20); // Amber tone\n    const lockSummary = doc.splitTextToSize(\n      \"[LOCKED] Detailed technical diagnosis and remediation steps are hidden on the free plan.\",\n      maxWidth\n    );\n    doc.text(lockSummary, 20, yPosition);\n    yPosition += lockSummary.length * 6 + 5;\n    doc.setFont(\"helvetica\", \"normal\");\n    doc.setTextColor(...textColor);\n  }\n  \n  yPosition += 5;\n    \n    // Revenue leak highlight\n    if (auditData.leakingRevenue) {\n      doc.setFontSize(12);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setTextColor(...accentColor);\n      doc.text(`Identified Revenue Leak: $${auditData.leakingRevenue.toLocaleString()}/month`, 20, yPosition);\n      yPosition += 10;\n      \n      if (auditData.topCulprit) {\n        doc.setFontSize(10);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.setTextColor(...textColor);\n        doc.text(`Primary Issue: ${auditData.topCulprit}`, 20, yPosition);\n        yPosition += 8;\n      }\n      \n      if (auditData.recoveryPotential) {\n        doc.setFontSize(10);\n        doc.setTextColor(46, 204, 113); // Green\n        doc.text(`Recovery Potential: ${auditData.recoveryPotential}`, 20, yPosition);\n        yPosition += 15;\n      }\n    }\n    \n    // SECTION 2: Conversion Metrics\n    yPosition += 5;\n    doc.setFontSize(16);\n    doc.setTextColor(...textColor);\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.text(\"Conversion Metrics\", 20, yPosition);\n    \n    yPosition += 10;\n    \n    // Create table data\n    const tableData = [\n      [\n        \"Active Users\",\n        auditData.activeUsers?.toLocaleString() || \"N/A\",\n      ],\n      [\n        \"Sessions\",\n        auditData.sessions?.toLocaleString() || \"N/A\",\n      ],\n      [\n        \"Conversions\",\n        auditData.conversions?.toLocaleString() || \"N/A\",\n      ],\n      [\n        \"Conversion Rate\",\n        auditData.activeUsers && auditData.conversions\n          ? `${((auditData.conversions / auditData.activeUsers) * 100).toFixed(2)}%`\n          : \"N/A\",\n      ],\n    ];\n    \n    // Add revenue leak row if available\n    if (auditData.leakingRevenue) {\n      tableData.push([\n        \"Estimated Monthly Revenue Leak\",\n        `$${auditData.leakingRevenue.toLocaleString()}`,\n      ]);\n    }\n    \n    // Generate table using autoTable (v5+ API: autoTable is a function, not a method)\n    autoTable(doc, {\n      startY: yPosition,\n      head: [[\"Metric\", \"Value\"]],\n      body: tableData,\n      theme: \"grid\",\n      headStyles: {\n        fillColor: primaryColor,\n        textColor: [255, 255, 255],\n        fontStyle: \"bold\",\n      },\n      bodyStyles: {\n        textColor: textColor,\n      },\n      alternateRowStyles: {\n        fillColor: [245, 245, 245],\n      },\n      margin: { left: 20, right: 20 },\n    });\n    \n    // Get the final Y position after the table\n    const finalY = (doc as any).lastAutoTable.finalY;\n    yPosition = finalY + 20;\n    \n    // SECTION 3: Recommended Actions\n    doc.setFontSize(16);\n    doc.setTextColor(...textColor);\n    doc.setFont(\"helvetica\", \"bold\");\n  doc.text(\"Recommended Actions\", 20, yPosition);\n    \n    yPosition += 10;\n    doc.setFontSize(11);\n    doc.setFont(\"helvetica\", \"normal\");\n    \n  if (!isPaid) {\n    // Technical fixes restricted message\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.setFontSize(14);\n    doc.setTextColor(150, 0, 0); // Red for urgency\n    doc.text(\"TECHNICAL FIXES RESTRICTED\", 20, yPosition);\n    yPosition += 10;\n    \n    doc.setFontSize(11);\n    doc.setFont(\"helvetica\", \"normal\");\n    doc.setTextColor(0, 0, 0);\n    doc.text(\"To access the full code fixes and implementation guide,\", 20, yPosition);\n    yPosition += 7;\n    doc.text(\"please complete the invoice for Vera Labs.\", 20, yPosition);\n    yPosition += 15;\n\n    // Pay Now CTA\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.setFontSize(12);\n    doc.setTextColor(16, 185, 129); // Emerald Green #10b981\n    const ctaText = \"Unlock the Full Action Plan & Technical Fixes\";\n    doc.text(ctaText, 20, yPosition);\n    yPosition += 10;\n    \n    // Box for secure payment\n    const boxX = 18;\n    const boxY = yPosition - 10;\n    const boxWidth = 100;\n    const boxHeight = 12;\n    \n    // Draw emerald green box\n    doc.setDrawColor(16, 185, 129); // Emerald Green\n    doc.setLineWidth(1);\n    doc.rect(boxX, boxY, boxWidth, boxHeight);\n    \n    // Add \"SECURE PAYMENT VIA MOBILE MONEY\" text inside the box\n    doc.setFont(\"helvetica\", \"bold\");\n    doc.setFontSize(8);\n    doc.setTextColor(16, 185, 129); // Emerald Green\n    doc.text(\"SECURE PAYMENT VIA MOBILE MONEY\", boxX + 2, boxY + 7);\n    \n    // Add payment link text\n    const payLinkText = \"CLICK HERE TO PAY 500 GHS & UNLOCK\";\n    doc.setFontSize(12);\n    doc.setTextColor(16, 185, 129); // Emerald Green\n    doc.text(payLinkText, 20, yPosition + 8);\n    \n    // Add clickable link covering the box area\n    const linkYPosition = boxY;\n    doc.link(boxX, linkYPosition, boxWidth, boxHeight + 10, {\n      url: \"https://paystack.com/pay/assamad-insight-engine\" // Replace with actual Paystack link\n    });\n    \n    yPosition += 25;\n\n    // Reset styles\n    doc.setFontSize(11);\n    doc.setFont(\"helvetica\", \"normal\");\n    doc.setTextColor(...textColor);\n  } else {\n    // Generate recommended actions based on the data\n    const recommendedActions = [\n      \"Optimize mobile checkout flow to reduce abandonment rates\",\n      \"Review and improve page load performance, especially on mobile devices\",\n      \"Implement conversion tracking improvements to capture all conversion events\",\n      \"Analyze high-intent user behavior patterns to identify friction points\",\n      \"A/B test checkout form optimizations to improve completion rates\",\n    ];\n    \n    // Customize based on topCulprit if available\n    if (auditData.topCulprit?.toLowerCase().includes(\"mobile\")) {\n      recommendedActions[0] = `Priority: Address ${auditData.topCulprit} - This is the primary revenue leak source`;\n    }\n    \n    recommendedActions.forEach((action, index) => {\n      doc.text(`â€¢ ${action}`, 25, yPosition);\n      yPosition += 7;\n    });\n  }\n    \n    // SECTION 4: Business Impact (if available)\n    if (auditData.businessInsights) {\n      yPosition += 15;\n      \n      // Check if we need a new page\n      if (yPosition > 250) {\n        doc.addPage();\n        yPosition = 20;\n      }\n      \n      doc.setFontSize(16);\n      doc.setTextColor(...textColor);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.text(\"Business Impact\", 20, yPosition);\n      \n      yPosition += 10;\n      doc.setFontSize(11);\n      doc.setFont(\"helvetica\", \"normal\");\n      \n      // Plain Explanation\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.setTextColor(...primaryColor);\n      doc.text(\"What This Means for Your Business:\", 20, yPosition);\n      \n      yPosition += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(...textColor);\n      const explanationLines = doc.splitTextToSize(auditData.businessInsights.plainExplanation, maxWidth);\n      doc.text(explanationLines, 20, yPosition);\n      yPosition += explanationLines.length * 6 + 10;\n      \n      // Quantified Revenue Loss\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.setTextColor(...accentColor);\n      doc.text(\"Financial Impact:\", 20, yPosition);\n      \n      yPosition += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(...textColor);\n      const revenueLines = doc.splitTextToSize(auditData.businessInsights.quantifiedRevenueLoss, maxWidth);\n      doc.text(revenueLines, 20, yPosition);\n      yPosition += revenueLines.length * 6 + 10;\n      \n      // Non-Technical Steps\n      if (isPaid) {\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(46, 204, 113); // Green\n        doc.text(\"What You Can Do (No Technical Knowledge Required):\", 20, yPosition);\n        \n        yPosition += 8;\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.setFontSize(11);\n        doc.setTextColor(...textColor);\n        auditData.businessInsights.nonTechnicalSteps.forEach((step, index) => {\n          doc.text(`${index + 1}. ${step}`, 25, yPosition);\n          const stepLines = doc.splitTextToSize(step, maxWidth - 10);\n          yPosition += stepLines.length * 6 + 5;\n        });\n      } else {\n        // Locked placeholder for unpaid users\n        doc.setFont(\"helvetica\", \"italic\");\n        doc.setFontSize(11);\n        doc.setTextColor(150, 150, 150); // Light grey\n        const lockedText = doc.splitTextToSize(\n          \"[Locked] Upgrade to see the non-technical Action Plan.\",\n          maxWidth\n        );\n        doc.text(lockedText, 20, yPosition);\n        yPosition += lockedText.length * 6 + 10;\n        \n        // Pay Now CTA for Business Impact section\n        yPosition += 5;\n        \n        // Box for secure payment\n        const boxX2 = 18;\n        const boxY2 = yPosition - 8;\n        const boxWidth2 = 100;\n        const boxHeight2 = 12;\n        \n        // Draw emerald green box\n        doc.setDrawColor(16, 185, 129); // Emerald Green\n        doc.setLineWidth(1);\n        doc.rect(boxX2, boxY2, boxWidth2, boxHeight2);\n        \n        // Add \"SECURE PAYMENT VIA MOBILE MONEY\" text inside the box\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(8);\n        doc.setTextColor(16, 185, 129); // Emerald Green\n        doc.text(\"SECURE PAYMENT VIA MOBILE MONEY\", boxX2 + 2, boxY2 + 7);\n        \n        // Add payment link text\n        const payLinkText2 = \"CLICK HERE TO PAY 500 GHS & UNLOCK\";\n        doc.setFontSize(12);\n        doc.setTextColor(16, 185, 129); // Emerald Green\n        doc.text(payLinkText2, 20, yPosition + 8);\n        \n        // Add clickable link covering the box area\n        const linkYPosition2 = boxY2;\n        doc.link(boxX2, linkYPosition2, boxWidth2, boxHeight2 + 10, {\n          url: \"https://paystack.com/pay/assamad-insight-engine\" // Replace with actual Paystack link\n        });\n        \n        yPosition += 25;\n      }\n    }\n    \n    // Add page number footer\n    const totalPages = doc.internal.pages.length - 1;\n    for (let i = 1; i <= totalPages; i++) {\n      doc.setPage(i);\n      doc.setFontSize(9);\n      doc.setTextColor(128, 128, 128);\n      doc.text(\n        `Page ${i} of ${totalPages}`,\n        doc.internal.pageSize.getWidth() / 2,\n        doc.internal.pageSize.getHeight() - 10,\n        { align: \"center\" }\n      );\n    }\n    \n    // Try to save the PDF, with fallback to opening in new window\n    try {\n      doc.save(\"Audit_Report.pdf\");\n      console.log(\"PDF Saved\");\n    } catch (error) {\n      console.warn(\"PDF save failed, opening in new window:\", error);\n      doc.output(\"dataurlnewwindow\");\n      console.log(\"PDF Opened in New Window\");\n    }\n  } catch (error) {\n    console.error(\"Error generating PDF:\", error);\n    throw error;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 763, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/app/dashboard/SuccessReveal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Lock, CheckCircle2 } from \"lucide-react\";\n\ninterface SuccessRevealProps {\n  children: React.ReactNode;\n  isUnlocked: boolean;\n  className?: string;\n}\n\nexport function SuccessReveal({ children, isUnlocked, className = \"\" }: SuccessRevealProps) {\n  const [showOverlay, setShowOverlay] = useState(!isUnlocked);\n  const [hasPlayedSound, setHasPlayedSound] = useState(false);\n  const [showShatter, setShowShatter] = useState(false);\n  const prevUnlockedRef = useRef(isUnlocked);\n\n  // Handle unlock transition\n  useEffect(() => {\n    // Detect when isUnlocked changes from false to true\n    if (isUnlocked && !prevUnlockedRef.current && showOverlay) {\n      // Play sound effect once\n      if (!hasPlayedSound) {\n        try {\n          // Create a simple unlock sound using Web Audio API\n          // This creates a brief electronic unlock sound\n          const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n          const oscillator = audioContext.createOscillator();\n          const gainNode = audioContext.createGain();\n\n          oscillator.connect(gainNode);\n          gainNode.connect(audioContext.destination);\n\n          oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\n          oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);\n          oscillator.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.15);\n\n          gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);\n\n          oscillator.start(audioContext.currentTime);\n          oscillator.stop(audioContext.currentTime + 0.2);\n\n          setHasPlayedSound(true);\n        } catch (error) {\n          console.log(\"Audio not available:\", error);\n        }\n      }\n\n      // Show shatter animation\n      setShowShatter(true);\n\n      // Delay hiding overlay to show animation\n      const timer = setTimeout(() => {\n        setShowOverlay(false);\n        setShowShatter(false);\n      }, 600); // Hide after shatter animation completes\n\n      return () => clearTimeout(timer);\n    }\n\n    // Update previous value\n    prevUnlockedRef.current = isUnlocked;\n  }, [isUnlocked, showOverlay, hasPlayedSound]);\n\n  // Shatter pieces animation variants\n  const shatterVariants = {\n    hidden: { opacity: 1, scale: 1, rotate: 0 },\n    visible: (index: number) => {\n      const positions = [\n        { x: -2000, y: -2000, rotate: -180 }, // Top-left\n        { x: 2000, y: -2000, rotate: 180 }, // Top-right\n        { x: -2000, y: 2000, rotate: -180 }, // Bottom-left\n        { x: 2000, y: 2000, rotate: 180 }, // Bottom-right\n      ];\n      return {\n        opacity: 0,\n        x: positions[index].x,\n        y: positions[index].y,\n        rotate: positions[index].rotate,\n        scale: 0.5,\n        transition: {\n          duration: 0.6,\n          ease: \"easeIn\",\n        },\n      };\n    },\n  };\n\n  return (\n    <div className={`relative ${className}`}>\n      {/* Content with scale and glow effect */}\n      <motion.div\n        initial={{ scale: 0.95, opacity: 0.7 }}\n        animate={{\n          scale: isUnlocked ? 1 : 0.95,\n          opacity: isUnlocked ? 1 : 0.7,\n        }}\n        transition={{\n          duration: 0.6,\n          ease: \"easeOut\",\n        }}\n        className={`relative transition-shadow duration-600 ${\n          isUnlocked ? \"drop-shadow-[0_0_30px_rgba(16,185,129,0.4)]\" : \"\"\n        }`}\n      >\n        {children}\n      </motion.div>\n\n      {/* Frosted glass overlay */}\n      <AnimatePresence>\n        {showOverlay && (\n          <motion.div\n            initial={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.1 }}\n            className=\"absolute inset-0 z-10 overflow-hidden rounded-2xl\"\n          >\n            {/* Shatter pieces - only show when unlocking */}\n            {showShatter && (\n              <>\n                {/* Top-left piece */}\n                <motion.div\n                  custom={0}\n                  variants={shatterVariants}\n                  initial=\"hidden\"\n                  animate=\"visible\"\n                  className=\"absolute top-0 left-0 w-1/2 h-1/2 bg-slate-900/80 backdrop-blur-xl border-r border-b border-slate-700/50\"\n                  style={{\n                    clipPath: \"polygon(0 0, 100% 0, 0 100%)\",\n                  }}\n                />\n                {/* Top-right piece */}\n                <motion.div\n                  custom={1}\n                  variants={shatterVariants}\n                  initial=\"hidden\"\n                  animate=\"visible\"\n                  className=\"absolute top-0 right-0 w-1/2 h-1/2 bg-slate-900/80 backdrop-blur-xl border-l border-b border-slate-700/50\"\n                  style={{\n                    clipPath: \"polygon(100% 0, 100% 100%, 0 0)\",\n                  }}\n                />\n                {/* Bottom-left piece */}\n                <motion.div\n                  custom={2}\n                  variants={shatterVariants}\n                  initial=\"hidden\"\n                  animate=\"visible\"\n                  className=\"absolute bottom-0 left-0 w-1/2 h-1/2 bg-slate-900/80 backdrop-blur-xl border-r border-t border-slate-700/50\"\n                  style={{\n                    clipPath: \"polygon(0 0, 0 100%, 100% 100%)\",\n                  }}\n                />\n                {/* Bottom-right piece */}\n                <motion.div\n                  custom={3}\n                  variants={shatterVariants}\n                  initial=\"hidden\"\n                  animate=\"visible\"\n                  className=\"absolute bottom-0 right-0 w-1/2 h-1/2 bg-slate-900/80 backdrop-blur-xl border-l border-t border-slate-700/50\"\n                  style={{\n                    clipPath: \"polygon(100% 0, 100% 100%, 0 100%)\",\n                  }}\n                />\n              </>\n            )}\n\n            {/* Overlay content with lock icon - more transparent to show teaser */}\n            <motion.div\n              initial={{ opacity: 1 }}\n              animate={{ opacity: showShatter ? 0 : 1 }}\n              transition={{ duration: 0.1 }}\n              className=\"absolute inset-0 bg-slate-900/40 backdrop-blur-sm rounded-2xl flex items-center justify-center pointer-events-none\"\n            >\n              {/* Lock/Unlock Icon - smaller badge style */}\n              <motion.div\n                className=\"flex flex-col items-center gap-2\"\n                animate={\n                  isUnlocked && !showShatter\n                    ? {\n                        scale: [1, 1.3, 1],\n                      }\n                    : {}\n                }\n                transition={{\n                  duration: 0.5,\n                  ease: \"easeOut\",\n                }}\n              >\n                <AnimatePresence mode=\"wait\">\n                  {isUnlocked && !showShatter ? (\n                    <motion.div\n                      key=\"check\"\n                      initial={{ scale: 0, rotate: -180, opacity: 0 }}\n                      animate={{ scale: 1, rotate: 0, opacity: 1 }}\n                      exit={{ scale: 0, rotate: 180, opacity: 0 }}\n                      transition={{\n                        type: \"spring\",\n                        stiffness: 200,\n                        damping: 15,\n                      }}\n                      className=\"p-3 rounded-full bg-emerald-500/20 backdrop-blur-sm border border-emerald-500/30\"\n                    >\n                      <CheckCircle2 className=\"w-8 h-8 text-emerald-500\" />\n                    </motion.div>\n                  ) : (\n                    <motion.div\n                      key=\"lock\"\n                      initial={{ scale: 0, opacity: 0 }}\n                      animate={{ scale: 1, opacity: 1 }}\n                      exit={{ scale: 0, opacity: 0 }}\n                      transition={{\n                        type: \"spring\",\n                        stiffness: 200,\n                        damping: 15,\n                      }}\n                      className=\"p-3 rounded-full bg-amber-500/20 backdrop-blur-sm border border-amber-500/30\"\n                    >\n                      <Lock className=\"w-8 h-8 text-amber-500\" />\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n              </motion.div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1106, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/components/ConfidenceScore.tsx"],"sourcesContent":["import { ShieldCheck, AlertCircle } from \"lucide-react\";\n\ninterface ConfidenceProps {\n  score: number; // 0 to 100\n  reason?: string;\n}\n\nexport default function ConfidenceScore({ score, reason }: ConfidenceProps) {\n  // Determine color and label based on score\n  const isHigh = score >= 90;\n  const isLow = score < 70;\n  \n  const statusColor = isHigh \n    ? \"text-[#D1FF00] bg-[#D1FF00]/10 border-[#D1FF00]/20\" \n    : isLow \n    ? \"text-red-500 bg-red-500/10 border-red-500/20\" \n    : \"text-amber-500 bg-amber-500/10 border-amber-500/20\";\n\n  return (\n    <div\n      className={`group relative inline-flex items-center gap-2 px-3 py-1 rounded-full border text-xs font-bold transition-all hover:scale-105 cursor-help ${statusColor}`}\n    >\n      {isHigh ? <ShieldCheck size={14} /> : <AlertCircle size={14} />}\n      \n      <span>{score}% CONFIDENCE</span>\n\n      {/* Modern 2026 Tooltip */}\n      <div className=\"absolute bottom-full mb-2 hidden group-hover:block w-48 p-3 bg-black text-white text-[10px] leading-relaxed rounded-xl shadow-2xl z-50\">\n        <p className=\"font-semibold mb-1 uppercase tracking-widest text-[#D1FF00]\">AI Reasoning</p>\n        <p className=\"opacity-80\">{reason || \"Analysis based on historical patterns and real-time data flow.\"}</p>\n        <div className=\"absolute -bottom-1 left-1/2 -translate-x-1/2 border-8 border-transparent border-t-black\"></div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AAAA;;;AAOe,SAAS,gBAAgB,EAAE,KAAK,EAAE,MAAM,EAAmB;IACxE,2CAA2C;IAC3C,MAAM,SAAS,SAAS;IACxB,MAAM,QAAQ,QAAQ;IAEtB,MAAM,cAAc,SAChB,uDACA,QACA,iDACA;IAEJ,qBACE,kOAAC;QACC,WAAW,CAAC,yIAAyI,EAAE,aAAa;;YAEnK,uBAAS,kOAAC,2QAAW;gBAAC,MAAM;;;;;qCAAS,kOAAC,2QAAW;gBAAC,MAAM;;;;;;0BAEzD,kOAAC;;oBAAM;oBAAM;;;;;;;0BAGb,kOAAC;gBAAI,WAAU;;kCACb,kOAAC;wBAAE,WAAU;kCAA8D;;;;;;kCAC3E,kOAAC;wBAAE,WAAU;kCAAc,UAAU;;;;;;kCACrC,kOAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB;KA3BwB"}},
    {"offset": {"line": 1195, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/utils/getAuditedStats.ts"],"sourcesContent":["type AuditedStatsInput = {\n  activeUsers?: number;\n  error?: string;\n  isDemoMode?: boolean;\n};\n\ntype AuditedStatsOutput = {\n  activeUsers: number;\n  confidenceScore: number;\n  confidenceReason: string;\n};\n\nexport function getAuditedStats({\n  activeUsers,\n  error,\n  isDemoMode,\n}: AuditedStatsInput): AuditedStatsOutput {\n  const safeActiveUsers = typeof activeUsers === \"number\" ? activeUsers : 0;\n\n  if (error) {\n    return {\n      activeUsers: safeActiveUsers,\n      confidenceScore: 62,\n      confidenceReason: \"Data source is not fully connected. Showing last known values.\",\n    };\n  }\n\n  if (isDemoMode) {\n    return {\n      activeUsers: safeActiveUsers,\n      confidenceScore: 88,\n      confidenceReason: \"Demo data matched against typical GA4 traffic baselines.\",\n    };\n  }\n\n  return {\n    activeUsers: safeActiveUsers,\n    confidenceScore: 94,\n    confidenceReason: \"Pattern matches 8 previous drop-offs in the 'Checkouts' funnel.\",\n  };\n}\n\n"],"names":[],"mappings":";;;;AAYO,SAAS,gBAAgB,EAC9B,WAAW,EACX,KAAK,EACL,UAAU,EACQ;IAClB,MAAM,kBAAkB,OAAO,gBAAgB,WAAW,cAAc;IAExE,IAAI,OAAO;QACT,OAAO;YACL,aAAa;YACb,iBAAiB;YACjB,kBAAkB;QACpB;IACF;IAEA,IAAI,YAAY;QACd,OAAO;YACL,aAAa;YACb,iBAAiB;YACjB,kBAAkB;QACpB;IACF;IAEA,OAAO;QACL,aAAa;QACb,iBAAiB;QACjB,kBAAkB;IACpB;AACF"}},
    {"offset": {"line": 1228, "column": 0}, "map": {"version":3,"sources":["file:///Users/drjacobyakubumahama/Documents/The%20Insight%20Engine/app/dashboard/dashboard-content.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { signOut } from \"next-auth/react\";\nimport { Mic2, AlertTriangle, Waves, Loader2, ExternalLink, Download } from \"lucide-react\";\nimport type { Session } from \"next-auth\";\nimport { PropertySelector } from \"./property-selector\";\nimport { generateVoiceBriefing } from \"@/app/actions/generateVoiceBriefing\";\nimport { generateBusinessInsights } from \"@/app/actions/generateBusinessInsights\";\nimport { initializePayment } from \"@/app/actions/paystack\";\nimport { NoPropertiesView } from \"./no-properties-view\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { generateAuditPDF } from \"@/utils/generateAuditPDF\";\nimport { SuccessReveal } from \"./SuccessReveal\";\nimport ConfidenceScore from \"@/components/ConfidenceScore\";\nimport { getAuditedStats } from \"@/utils/getAuditedStats\";\nimport confetti from \"canvas-confetti\";\n\ninterface BusinessInsight {\n  plainExplanation: string;\n  quantifiedRevenueLoss: string;\n  nonTechnicalSteps: string[];\n}\n\ninterface AnalyticsData {\n  activeUsers?: number;\n  conversions?: number;\n  sessions?: number;\n  leakingRevenue?: number;\n  topCulprit?: string;\n  recoveryPotential?: string;\n  businessInsights?: BusinessInsight;\n  error?: string;\n  dateRange?: {\n    startDate: string;\n    endDate: string;\n  };\n}\n\ninterface Property {\n  id: string;\n  displayName: string;\n}\n\ninterface DashboardContentProps {\n  session: Session;\n  analyticsData: AnalyticsData;\n  properties: Property[];\n  currentPropertyId?: string;\n  isDemoMode?: boolean;\n  hasPropertiesError?: boolean;\n}\n\n// Equalizer animation component\nfunction EqualizerIcon() {\n  const bars = [\n    [0.3, 0.7, 0.5, 0.9, 0.4, 0.6, 0.3], // Bar 1 keyframes\n    [0.5, 0.9, 0.4, 0.8, 0.6, 0.7, 0.5], // Bar 2 keyframes\n    [0.7, 1, 0.6, 0.9, 0.8, 0.95, 0.7],  // Bar 3 keyframes (tallest)\n    [0.4, 0.6, 0.5, 0.7, 0.45, 0.65, 0.4], // Bar 4 keyframes\n    [0.3, 0.5, 0.4, 0.6, 0.35, 0.55, 0.3], // Bar 5 keyframes\n  ];\n\n  return (\n    <div className=\"flex items-end gap-0.5 h-4\">\n      {bars.map((keyframes, index) => (\n        <motion.div\n          key={index}\n          className=\"w-0.5 bg-purple-400 rounded-sm\"\n          animate={{\n            scaleY: keyframes,\n          }}\n          transition={{\n            duration: 1,\n            repeat: Infinity,\n            delay: index * 0.15,\n            ease: \"easeInOut\",\n          }}\n          style={{ height: \"100%\" }}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport function DashboardContent({\n  session,\n  analyticsData,\n  properties,\n  currentPropertyId,\n  isDemoMode = false,\n  hasPropertiesError = false,\n}: DashboardContentProps) {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const userName = session.user?.name || \"User\";\n  \n  // Check payment status from URL params\n  const status = searchParams.get(\"status\");\n  const [isPaid, setIsPaid] = useState(status === \"success\" || status === \"successful\");\n  const hasTriggeredConfetti = useRef(false);\n\n  // Check payment status and trigger unlock\n  useEffect(() => {\n    if (status === \"success\" || status === \"successful\") {\n      setIsPaid(true);\n\n      // Trigger confetti explosion (only once)\n      if (!hasTriggeredConfetti.current) {\n        hasTriggeredConfetti.current = true;\n        \n        confetti({\n          particleCount: 100,\n          spread: 70,\n          origin: { y: 0.6 },\n          colors: [\"#10b981\", \"#34d399\", \"#6ee7b7\", \"#a7f3d0\"], // Emerald theme\n        });\n\n        // Clean up URL after 3 seconds\n        const cleanupTimer = setTimeout(() => {\n          router.replace(\"/dashboard\");\n        }, 3000);\n\n        return () => clearTimeout(cleanupTimer);\n      }\n    }\n    // Note: Once paid, keep it paid (don't reset when URL is cleaned)\n  }, [status, router]);\n\n  const handleUseDemoData = () => {\n    router.push(\"/dashboard?demo=true\");\n  };\n\n  // Show no properties view if we have no properties and not in demo mode\n  const shouldShowNoPropertiesView = properties.length === 0 && !isDemoMode;\n  const currentDate = new Date().toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  });\n\n  // Format numbers with commas\n  const formatNumber = (num: number | undefined) => {\n    if (num === undefined) return \"N/A\";\n    return num.toLocaleString();\n  };\n\n  // Calculate estimated revenue loss (example calculation based on conversions drop)\n  const activeUsers = analyticsData.activeUsers || 0;\n  const conversions = analyticsData.conversions || 0;\n  const sessions = analyticsData.sessions || 0;\n  \n  const auditedStats = getAuditedStats({\n    activeUsers: analyticsData.activeUsers,\n    error: analyticsData.error,\n    isDemoMode,\n  });\n\n  // Calculate conversion rate percentage\n  const conversionRate = activeUsers > 0 ? ((conversions / activeUsers) * 100).toFixed(1) : \"0.0\";\n  \n  // Calculate leaking revenue (use demo data if available, otherwise calculate)\n  const leakingRevenue = analyticsData.leakingRevenue || (isDemoMode \n    ? 12450 \n    : (activeUsers - conversions) * 45); // Estimate based on lost conversions\n  \n  // Get demo mode specific data\n  const topCulprit = analyticsData.topCulprit || \"Mobile checkout abandonment\";\n  const recoveryPotential = analyticsData.recoveryPotential || \"+18% Conversion lift\";\n  \n  // Last updated timestamp\n  const lastUpdated = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n  });\n\n  // AI Insight text for voice briefing (uses specific demo script in demo mode)\n  const insightText = isDemoMode\n    ? `Hello ${userName.split(\" \")[0] || \"there\"}, I've analyzed your store data. I've found a $12,000 monthly leak caused by mobile checkout drops. I recommend optimizing your image payloads immediately.`\n    : `AI Insight: Mobile checkout abandonment increased by 18% following a recent site update on December 23rd. High-intent users with 3 or more page views are leaving at a 34% higher rate than last month. Payment form load time increased to 3.2 seconds, up from 1.1 seconds, directly correlating with the drop.`;\n\n  // Audio playback state\n  const [isLoadingAudio, setIsLoadingAudio] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  \n  // PDF generation state\n  const [isGeneratingPDF, setIsGeneratingPDF] = useState(false);\n\n  const handlePlayBriefing = async () => {\n    try {\n      // If already playing, stop it\n      if (audioRef.current && !audioRef.current.paused) {\n        audioRef.current.pause();\n        audioRef.current = null;\n        setIsPlaying(false);\n        return;\n      }\n\n      setIsLoadingAudio(true);\n      setIsPlaying(false);\n\n      // Generate voice briefing\n      const result = await generateVoiceBriefing(insightText, \"onyx\");\n\n      if (result.error || !result.audioBase64) {\n        console.error(\"Error generating voice briefing:\", result.error);\n        setIsLoadingAudio(false);\n        return;\n      }\n\n      // Create audio element with Base64 data\n      const audioSrc = `data:audio/mpeg;base64,${result.audioBase64}`;\n      const audio = new Audio(audioSrc);\n\n      // Set up event listeners\n      audio.addEventListener(\"play\", () => setIsPlaying(true));\n      audio.addEventListener(\"pause\", () => setIsPlaying(false));\n      audio.addEventListener(\"ended\", () => {\n        setIsPlaying(false);\n        audioRef.current = null;\n      });\n      audio.addEventListener(\"error\", (e) => {\n        console.error(\"Audio playback error:\", e);\n        setIsPlaying(false);\n        setIsLoadingAudio(false);\n        audioRef.current = null;\n      });\n\n      audioRef.current = audio;\n      setIsLoadingAudio(false);\n\n      // Play the audio\n      await audio.play();\n    } catch (error) {\n      console.error(\"Error playing briefing:\", error);\n      setIsLoadingAudio(false);\n      setIsPlaying(false);\n    }\n  };\n\n  // Cleanup audio on unmount\n  useEffect(() => {\n    return () => {\n      if (audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current = null;\n      }\n    };\n  }, []);\n\n  // Auto-trigger AI briefing in demo mode\n  useEffect(() => {\n    if (isDemoMode && !isLoadingAudio && !isPlaying && !audioRef.current) {\n      // Small delay to ensure component is fully mounted\n      const timer = setTimeout(() => {\n        handlePlayBriefing();\n      }, 1500);\n      return () => clearTimeout(timer);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isDemoMode]); // Only run when demo mode changes\n\n  // Handle payment initialization\n  const handleUnlockPayment = async () => {\n    try {\n      const userEmail = session.user?.email;\n      if (!userEmail) {\n        console.error(\"User email not found\");\n        return;\n      }\n\n      const paystackUrl = await initializePayment(userEmail, 50); // 50 GHS\n      \n      if (paystackUrl) {\n        window.location.href = paystackUrl;\n      } else {\n        console.error(\"Failed to initialize payment\");\n      }\n    } catch (error) {\n      console.error(\"Error initializing payment:\", error);\n    }\n  };\n\n  // Handle PDF generation\n  const handleDownloadPDF = async () => {\n    setIsGeneratingPDF(true);\n    \n    // Generate PDF with current data\n    try {\n      // Generate business insights if not already available\n      let businessInsights = analyticsData.businessInsights;\n      if (!businessInsights && topCulprit) {\n        const insightResult = await generateBusinessInsights(\n          `${topCulprit}. ${insightText}`,\n          leakingRevenue\n        );\n        if (insightResult.insights) {\n          businessInsights = insightResult.insights;\n        }\n      }\n      \n      await generateAuditPDF(\n        { name: userName },\n        {\n          leakingRevenue: leakingRevenue,\n          activeUsers: analyticsData.activeUsers,\n          conversions: analyticsData.conversions,\n          sessions: analyticsData.sessions,\n          topCulprit: topCulprit,\n          recoveryPotential: recoveryPotential,\n          insightText: insightText,\n          businessInsights: businessInsights,\n        },\n        isPaid\n      );\n    } catch (error) {\n      console.error(\"Error generating PDF:\", error);\n    } finally {\n      // Small delay to ensure PDF download starts\n      setTimeout(() => {\n        setIsGeneratingPDF(false);\n      }, 500);\n    }\n  };\n\n  // Show no properties view if we have no properties and not in demo mode\n  if (shouldShowNoPropertiesView) {\n    return (\n      <div className=\"min-h-screen bg-background p-6 sm:p-8 lg:p-10\">\n        <div className=\"max-w-7xl mx-auto\">\n          {/* Header */}\n          <div className=\"flex flex-col gap-4 mb-8\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h1 className=\"text-3xl sm:text-4xl font-bold text-slate-100 mb-2\">\n                  Diagnostic Report for {userName}\n                </h1>\n                <p className=\"text-slate-400 text-sm sm:text-base\">\n                  {new Date().toLocaleDateString(\"en-US\", {\n                    year: \"numeric\",\n                    month: \"long\",\n                    day: \"numeric\",\n                  })}\n                </p>\n              </div>\n              <motion.button\n                onClick={() => signOut({ callbackUrl: \"/\" })}\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                className=\"px-4 py-2 rounded-lg border border-slate-700/50 bg-slate-800/50 text-slate-300 hover:text-slate-100 hover:bg-slate-700/50 transition-colors text-sm font-medium\"\n              >\n                Sign Out\n              </motion.button>\n            </div>\n          </div>\n\n          {/* No Properties View */}\n          <NoPropertiesView onUseDemoData={handleUseDemoData} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background p-6 sm:p-8 lg:p-10\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex flex-col gap-4 mb-8\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4 flex-wrap\">\n              <div>\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <h1 className=\"text-3xl sm:text-4xl font-bold text-slate-100\">\n                    Diagnostic Report for {userName}\n                  </h1>\n                  {isDemoMode && (\n                    <motion.span\n                      initial={{ opacity: 0, scale: 0.9 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      className=\"inline-flex items-center gap-1.5 rounded-full border border-amber-500/30 bg-amber-500/10 px-3 py-1 text-xs font-medium text-amber-300\"\n                    >\n                      <span className=\"h-1.5 w-1.5 rounded-full bg-amber-400 animate-pulse\" />\n                      Demo Mode Active\n                    </motion.span>\n                  )}\n                </div>\n                <p className=\"text-slate-400 text-sm sm:text-base\">{currentDate}</p>\n              </div>\n              {!isDemoMode && (\n                <PropertySelector\n                  properties={properties}\n                  currentPropertyId={currentPropertyId}\n                />\n              )}\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <motion.button\n                onClick={handleDownloadPDF}\n                disabled={isGeneratingPDF}\n                whileHover={!isGeneratingPDF ? { scale: 1.05 } : {}}\n                whileTap={!isGeneratingPDF ? { scale: 0.95 } : {}}\n                className=\"flex items-center gap-2 rounded-lg border border-emerald-500/30 bg-emerald-500/10 px-4 py-2 text-sm font-medium text-emerald-300 transition-all hover:bg-emerald-500/20 hover:border-emerald-500/50 hover:shadow-[0_0_15px_rgba(16,185,129,0.3)] disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isGeneratingPDF ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    <span>Generating...</span>\n                  </>\n                ) : (\n                  <>\n                    <Download className=\"h-4 w-4\" />\n                    <span>Download PDF Report</span>\n                  </>\n                )}\n              </motion.button>\n              {isDemoMode && (\n                <motion.a\n                  href=\"https://support.google.com/analytics/answer/9304153\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"flex items-center gap-2 rounded-lg border border-emerald-500/30 bg-emerald-500/10 px-4 py-2 text-sm font-medium text-emerald-300 transition-colors hover:bg-emerald-500/20 hover:border-emerald-500/50\"\n                >\n                  <span>Add Your First Site</span>\n                  <ExternalLink className=\"h-4 w-4\" />\n                </motion.a>\n              )}\n              <motion.button\n                onClick={() => signOut({ callbackUrl: \"/\" })}\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                className=\"px-4 py-2 rounded-lg border border-slate-700/50 bg-slate-800/50 text-slate-300 hover:text-slate-100 hover:bg-slate-700/50 transition-colors text-sm font-medium\"\n              >\n                Sign Out\n              </motion.button>\n            </div>\n          </div>\n        </div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 16 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.05 }}\n          className=\"rounded-3xl border border-[#D1FF00]/20 bg-black/80 p-6 sm:p-8 shadow-[0_0_40px_rgba(209,255,0,0.12)]\"\n        >\n          <div className=\"flex flex-wrap items-center justify-between gap-4\">\n            <div>\n              <div className=\"flex items-center gap-3 mb-2\">\n                <h2 className=\"text-lg sm:text-xl font-semibold text-slate-100\">\n                  Current Active Users\n                </h2>\n                <ConfidenceScore\n                  score={auditedStats.confidenceScore}\n                  reason={auditedStats.confidenceReason}\n                />\n              </div>\n              <p className=\"text-sm text-slate-400\">\n                Real-time signal from your connected analytics property.\n              </p>\n            </div>\n            <div className=\"text-right\">\n              <p className=\"text-4xl sm:text-5xl font-bold tracking-tight text-[#D1FF00]\">\n                {analyticsData.error ? \"â€”\" : formatNumber(auditedStats.activeUsers)}\n              </p>\n              <p className=\"text-xs uppercase tracking-[0.2em] text-[#D1FF00]/70 mt-2\">\n                Active Users\n              </p>\n            </div>\n          </div>\n        </motion.div>\n\n        {/* Bento Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6\">\n          {/* Leaking Revenue Card - Large, spans 2 columns on large screens */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.1 }}\n            className=\"lg:col-span-2 rounded-2xl border border-slate-700/50 bg-slate-900/40 backdrop-blur-xl p-6 lg:p-8 shadow-xl\"\n          >\n            <div className=\"flex items-start justify-between mb-4\">\n              <div>\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <h2 className=\"text-lg font-semibold text-slate-200\">\n                    Leaking Revenue\n                  </h2>\n                  <motion.span\n                    initial={{ opacity: 0, scale: 0.9 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    className=\"inline-flex items-center gap-1.5 rounded-full border border-emerald-500/30 bg-emerald-500/10 px-2.5 py-0.5 text-xs font-medium text-emerald-300\"\n                  >\n                    <span className=\"h-1.5 w-1.5 rounded-full bg-emerald-400 animate-pulse\" />\n                    Diagnostic Complete\n                  </motion.span>\n                </div>\n                <p className=\"text-sm text-slate-400\">Estimated monthly loss</p>\n              </div>\n              <div className=\"relative\">\n                <motion.div\n                  animate={{ scale: [1, 1.2, 1] }}\n                  transition={{ duration: 2, repeat: Infinity }}\n                  className=\"absolute inset-0 bg-red-500/30 rounded-full blur-xl\"\n                />\n                <AlertTriangle className=\"h-6 w-6 text-red-400 relative z-10\" />\n              </div>\n            </div>\n            <div className=\"mt-6\">\n              <div className=\"flex items-baseline gap-2\">\n                <span className=\"text-5xl lg:text-6xl font-bold text-red-400\">\n                  {analyticsData.error ? (\n                    \"Error\"\n                  ) : (\n                    `-$${leakingRevenue.toLocaleString()}`\n                  )}\n                </span>\n                <span className=\"text-lg text-slate-400\">/month</span>\n              </div>\n              <div className=\"mt-4 flex items-center gap-2\">\n                <motion.span\n                  animate={{ opacity: [1, 0.5, 1] }}\n                  transition={{ duration: 1.5, repeat: Infinity }}\n                  className=\"h-2 w-2 rounded-full bg-red-500\"\n                />\n                <span className=\"text-sm font-medium text-red-400\">\n                  High Alert\n                </span>\n              </div>\n              <p className=\"text-sm text-slate-400 mt-4\">\n                {analyticsData.error\n                  ? analyticsData.error\n                  : isDemoMode\n                  ? `Identified Leaks: $12,450 / month. Top Culprit: ${topCulprit}. Recovery Potential: ${recoveryPotential}.`\n                  : `Estimated revenue loss based on ${formatNumber(activeUsers)} active users and ${formatNumber(conversions)} conversions`}\n              </p>\n              <p className=\"text-xs text-slate-500 mt-4\">\n                Last updated: {lastUpdated}\n              </p>\n            </div>\n          </motion.div>\n\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.15 }}\n            className=\"rounded-2xl border border-slate-700/50 bg-slate-900/40 backdrop-blur-xl p-6 shadow-xl\"\n          >\n            <div className=\"flex items-start justify-between mb-4\">\n              <h3 className=\"font-semibold text-slate-200\">Revenue Leak Detected</h3>\n              <ConfidenceScore\n                score={94}\n                reason=\"Pattern matches 8 previous drop-offs in the 'Checkouts' funnel.\"\n              />\n            </div>\n            <p className=\"text-sm text-slate-400\">\n              GHS 1,200 is being lost daily due to a broken Mobile Money callback URL.\n            </p>\n          </motion.div>\n\n          {/* AI Insight Card - Medium size */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2 }}\n            className=\"rounded-2xl border border-slate-700/50 bg-slate-900/40 backdrop-blur-xl p-6 lg:p-8 shadow-xl\"\n          >\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 rounded-lg bg-purple-500/20 border border-purple-500/30\">\n                  <Mic2 className=\"h-5 w-5 text-purple-400\" />\n                </div>\n                <h2 className=\"text-lg font-semibold text-slate-200\">\n                  AI Insight\n                </h2>\n              </div>\n              <motion.button\n                onClick={handlePlayBriefing}\n                disabled={isLoadingAudio}\n                whileHover={!isLoadingAudio ? { scale: 1.05 } : {}}\n                whileTap={!isLoadingAudio ? { scale: 0.95 } : {}}\n                className=\"flex items-center gap-2 rounded-lg border border-purple-500/30 bg-purple-500/10 px-3 py-1.5 text-sm font-medium text-purple-300 transition-colors hover:bg-purple-500/20 hover:border-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isLoadingAudio ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    <span>Loading...</span>\n                  </>\n                ) : isPlaying ? (\n                  <>\n                    <EqualizerIcon />\n                    <span>Playing...</span>\n                  </>\n                ) : (\n                  <>\n                    <Waves className=\"h-4 w-4\" />\n                    <span>Play Briefing</span>\n                  </>\n                )}\n              </motion.button>\n            </div>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-purple-400 mt-1\">â€¢</span>\n                <p className=\"text-sm text-slate-300 leading-relaxed\">\n                  Mobile checkout abandonment increased by 18% following a\n                  recent site update on December 23rd.\n                </p>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-purple-400 mt-1\">â€¢</span>\n                <p className=\"text-sm text-slate-300 leading-relaxed\">\n                  High-intent users (3+ page views) are leaving at a 34% higher\n                  rate than last month.\n                </p>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <span className=\"text-purple-400 mt-1\">â€¢</span>\n                <p className=\"text-sm text-slate-300 leading-relaxed\">\n                  Payment form load time increased to 3.2s (was 1.1s), directly\n                  correlating with the drop.\n                </p>\n              </div>\n            </div>\n            <p className=\"text-xs text-slate-500 mt-4\">\n              Last updated: {lastUpdated}\n            </p>\n          </motion.div>\n\n          {/* GA4 Raw Data Card - Spans full width on large screens, 2 columns on medium */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3 }}\n            className=\"lg:col-span-3 md:col-span-2 rounded-2xl border border-slate-700/50 bg-slate-900/40 backdrop-blur-xl p-6 lg:p-8 shadow-xl\"\n          >\n            <h2 className=\"text-lg font-semibold text-slate-200 mb-6\">\n              GA4 Raw Data\n            </h2>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-slate-700/50\">\n                    <th className=\"text-left py-3 px-4 text-sm font-semibold text-slate-300\">\n                      Metric\n                    </th>\n                    <th className=\"text-right py-3 px-4 text-sm font-semibold text-slate-300\">\n                      Value\n                    </th>\n                    <th className=\"text-right py-3 px-4 text-sm font-semibold text-slate-300\">\n                      Change\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/30\">\n                  <tr>\n                    <td className=\"py-4 px-4 text-sm text-slate-400\">\n                      Active Users\n                    </td>\n                    <td className=\"py-4 px-4 text-sm font-semibold text-slate-200 text-right\">\n                      {formatNumber(analyticsData.activeUsers)}\n                    </td>\n                    <td className=\"py-4 px-4 text-sm text-slate-500 text-right\">\n                      Last 7 days\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"py-4 px-4 text-sm text-slate-400\">Sessions</td>\n                    <td className=\"py-4 px-4 text-sm font-semibold text-slate-200 text-right\">\n                      {formatNumber(analyticsData.sessions)}\n                    </td>\n                    <td className=\"py-4 px-4 text-sm text-slate-500 text-right\">\n                      Last 7 days\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"py-4 px-4 text-sm text-slate-400\">\n                      Conversions\n                    </td>\n                    <td className=\"py-4 px-4 text-sm font-semibold text-slate-200 text-right\">\n                      {formatNumber(analyticsData.conversions)}\n                    </td>\n                    <td className=\"py-4 px-4 text-sm text-slate-500 text-right\">\n                      Last 7 days\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n              <p className=\"text-xs text-slate-500 mt-4\">\n                Last updated: {lastUpdated}\n              </p>\n            </div>\n          </motion.div>\n          \n          {/* Action Plan Card - Premium (wrapped in SuccessReveal) */}\n          <SuccessReveal isUnlocked={isPaid}>\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.4 }}\n              className=\"lg:col-span-2 rounded-2xl border border-slate-700/50 bg-slate-900/40 backdrop-blur-xl p-6 lg:p-8 shadow-xl\"\n            >\n              <h2 className=\"text-lg font-semibold text-slate-200 mb-6\">\n                Action Plan\n              </h2>\n              {!isPaid ? (\n                // Teaser content (locked state)\n                <div className=\"relative space-y-4\">\n                  <div>\n                    <p className=\"text-sm text-slate-300 leading-relaxed mb-4\">\n                      AI has identified a specific database query causing your 4s delay...\n                    </p>\n                    {/* Blurred Code Block */}\n                    <div className=\"relative rounded-lg border border-slate-700/50 bg-slate-950/60 p-4 overflow-hidden\">\n                      <pre className=\"text-xs font-mono text-slate-400 select-none blur-sm\">\n                        <code>{`SELECT * FROM orders o\nJOIN customers c ON o.customer_id = c.id\nJOIN products p ON o.product_id = p.id\nLEFT JOIN reviews r ON p.id = r.product_id\nWHERE o.status = 'pending'\n  AND o.created_at > NOW() - INTERVAL '30 days'\n  AND c.subscription_tier IN ('premium', 'enterprise')\nORDER BY o.created_at DESC\nLIMIT 100;`}</code>\n                      </pre>\n                      {/* Overlay to enhance blur effect */}\n                      <div className=\"absolute inset-0 bg-slate-900/80 backdrop-blur-md pointer-events-none\" />\n                    </div>\n                    {/* Value Tag */}\n                    <div className=\"flex items-center gap-2 text-xs text-emerald-400 font-medium\">\n                      <span className=\"h-1.5 w-1.5 rounded-full bg-emerald-400 animate-pulse\" />\n                      Estimated Revenue Recovery: +GHS 2,400/mo.\n                    </div>\n                  </div>\n                  {/* Unlock Button */}\n                  <motion.button\n                    onClick={handleUnlockPayment}\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    className=\"w-full rounded-lg border-2 border-emerald-500/60 bg-gradient-to-r from-emerald-600 to-emerald-500 px-6 py-3 text-sm font-semibold text-white shadow-[0_0_20px_rgba(16,185,129,0.4)] hover:shadow-[0_0_30px_rgba(16,185,129,0.6)] transition-shadow flex items-center justify-center gap-2\"\n                  >\n                    <span>Unlock Full Report (GHS 50)</span>\n                    <span className=\"text-lg\">â†’</span>\n                  </motion.button>\n                </div>\n              ) : (\n                // Full content (unlocked state)\n                <div className=\"space-y-4\">\n                  <div className=\"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20\">\n                    <h3 className=\"text-sm font-semibold text-emerald-400 mb-2\">\n                      Priority 1: Mobile Checkout Optimization\n                    </h3>\n                    <p className=\"text-sm text-slate-300\">\n                      Reduce mobile checkout latency from 4.2s to under 2s. Expected impact: +18% conversion lift.\n                    </p>\n                  </div>\n                  <div className=\"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20\">\n                    <h3 className=\"text-sm font-semibold text-blue-400 mb-2\">\n                      Priority 2: Image Payload Optimization\n                    </h3>\n                    <p className=\"text-sm text-slate-300\">\n                      Optimize product images to reduce load time. Target: 50% reduction in image payload size.\n                    </p>\n                  </div>\n                  <div className=\"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20\">\n                    <h3 className=\"text-sm font-semibold text-purple-400 mb-2\">\n                      Priority 3: Form Validation Optimization\n                    </h3>\n                    <p className=\"text-sm text-slate-300\">\n                      Streamline checkout form validation to reduce submission latency from 3.2s to 1.1s.\n                    </p>\n                  </div>\n                  <div className=\"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20\">\n                    <h3 className=\"text-sm font-semibold text-amber-400 mb-2\">\n                      Priority 4: Payment Method Caching\n                    </h3>\n                    <p className=\"text-sm text-slate-300\">\n                      Implement payment method caching to improve repeat checkout experience.\n                    </p>\n                  </div>\n                  <div className=\"p-4 rounded-lg bg-cyan-500/10 border border-cyan-500/20\">\n                    <h3 className=\"text-sm font-semibold text-cyan-400 mb-2\">\n                      Priority 5: Mobile-Specific Optimizations\n                    </h3>\n                    <p className=\"text-sm text-slate-300\">\n                      Apply mobile-specific performance optimizations to reduce overall page load time by 40%.\n                    </p>\n                  </div>\n                </div>\n              )}\n            </motion.div>\n          </SuccessReveal>\n\n          {/* Technical Fixes Card - Premium (wrapped in SuccessReveal) */}\n          <SuccessReveal isUnlocked={isPaid}>\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.5 }}\n              className=\"rounded-2xl border border-slate-700/50 bg-slate-900/40 backdrop-blur-xl p-6 lg:p-8 shadow-xl\"\n            >\n              <h2 className=\"text-lg font-semibold text-slate-200 mb-6\">\n                Technical Fixes\n              </h2>\n              {!isPaid ? (\n                // Teaser content (locked state) - titles visible, details blurred\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-emerald-400 mt-1\">1.</span>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm font-medium text-slate-200\">Optimize Image Payloads</p>\n                      <div className=\"relative mt-1\">\n                        <p className=\"text-xs text-slate-400 blur-sm select-none\">\n                          Implement lazy loading with intersection observer API. Use WebP format with fallbacks. Target: 50% reduction in payload size. Code: const observer = new IntersectionObserver(configure callback handlers)\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-emerald-400 mt-1\">2.</span>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm font-medium text-slate-200\">Reduce Checkout Form Latency</p>\n                      <div className=\"relative mt-1\">\n                        <p className=\"text-xs text-slate-400 blur-sm select-none\">\n                          Debounce validation calls. Use requestIdleCallback for non-critical validations. Optimize regex patterns. Expected: 3.2s â†’ 1.1s. Implementation: async function validateForm() with validation logic\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-emerald-400 mt-1\">3.</span>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm font-medium text-slate-200\">Implement Payment Method Caching</p>\n                      <div className=\"relative mt-1\">\n                        <p className=\"text-xs text-slate-400 blur-sm select-none\">\n                          Cache payment methods in localStorage with 24h TTL. Use indexedDB for larger datasets. Reduces API calls by 70%. Code: const cachePaymentMethods = () with caching implementation\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Unlock Button */}\n                  <motion.button\n                    onClick={handleUnlockPayment}\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    className=\"w-full mt-6 rounded-lg border-2 border-emerald-500/60 bg-gradient-to-r from-emerald-600 to-emerald-500 px-6 py-3 text-sm font-semibold text-white shadow-[0_0_20px_rgba(16,185,129,0.4)] hover:shadow-[0_0_30px_rgba(16,185,129,0.6)] transition-shadow flex items-center justify-center gap-2\"\n                  >\n                    <span>Unlock Full Report (GHS 50)</span>\n                    <span className=\"text-lg\">â†’</span>\n                  </motion.button>\n                </div>\n              ) : (\n                // Full content (unlocked state)\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-emerald-400 mt-1\">1.</span>\n                    <div>\n                      <p className=\"text-sm font-medium text-slate-200\">Optimize Image Payloads</p>\n                      <p className=\"text-xs text-slate-400 mt-1\">Implement lazy loading with intersection observer API. Use WebP format with fallbacks. Target: 50% reduction in payload size.</p>\n                      <pre className=\"text-xs text-slate-500 mt-2 p-2 bg-slate-800/50 rounded border border-slate-700/50 overflow-x-auto\">\n                        <code>{`const observer = new IntersectionObserver(\n  (entries) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        entry.target.src = entry.target.dataset.src;\n      }\n    });\n  }\n);`}</code>\n                      </pre>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-emerald-400 mt-1\">2.</span>\n                    <div>\n                      <p className=\"text-sm font-medium text-slate-200\">Reduce Checkout Form Latency</p>\n                      <p className=\"text-xs text-slate-400 mt-1\">Debounce validation calls. Use requestIdleCallback for non-critical validations. Optimize regex patterns. Expected: 3.2s â†’ 1.1s.</p>\n                      <pre className=\"text-xs text-slate-500 mt-2 p-2 bg-slate-800/50 rounded border border-slate-700/50 overflow-x-auto\">\n                        <code>{`async function validateForm() {\n  await requestIdleCallback(() => {\n    // Non-critical validation\n  });\n  // Critical validation runs immediately\n}`}</code>\n                      </pre>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-emerald-400 mt-1\">3.</span>\n                    <div>\n                      <p className=\"text-sm font-medium text-slate-200\">Implement Payment Method Caching</p>\n                      <p className=\"text-xs text-slate-400 mt-1\">Cache payment methods in localStorage with 24h TTL. Use indexedDB for larger datasets. Reduces API calls by 70%.</p>\n                      <pre className=\"text-xs text-slate-500 mt-2 p-2 bg-slate-800/50 rounded border border-slate-700/50 overflow-x-auto\">\n                        <code>{`const cachePaymentMethods = () => {\n  const cached = localStorage.getItem('paymentMethods');\n  if (cached && isCacheValid(cached)) {\n    return JSON.parse(cached);\n  }\n  // Fetch and cache new data\n};`}</code>\n                      </pre>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </motion.div>\n          </SuccessReveal>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}